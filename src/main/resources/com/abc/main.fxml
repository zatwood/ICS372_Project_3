<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.abc.OrderTrackingController">

    <top>
        <VBox spacing="10" style="-fx-padding: 10;">
            <Label text="Order Tracking System"
                   style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"
                   BorderPane.alignment="CENTER" />
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Button text="Refresh Orders" onAction="#handleRefresh"
                        style="-fx-font-size: 12px; -fx-padding: 5 10; -fx-background-color: #3498db; -fx-text-fill: white;" />
                <Button text="Enable Auto-Refresh" fx:id="toggleAutoRefreshBtn" onAction="#handleToggleAutoRefresh"
                        style="-fx-font-size: 12px; -fx-padding: 5 10; -fx-background-color: #27ae60; -fx-text-fill: white;" />
                <Label fx:id="autoRefreshLabel" text="Auto-refresh: ON"
                       style="-fx-text-fill: #27ae60; -fx-font-weight: bold; -fx-padding: 5 0;" />
                <Label text="Watches 'uploads' directory for new JSON and XML files"
                       style="-fx-text-fill: #7f8c8d; -fx-font-style: italic; -fx-padding: 5 0;" />
            </HBox>
        </VBox>
    </top>

    <center>
        <TabPane>
            <tabs>
                <Tab text="Pending Orders">
                    <VBox spacing="10">
                        <Label text="Orders waiting to be processed"
                               style="-fx-text-fill: #e67e22; -fx-font-weight: bold;" />
                        <BorderPane>
                            <center>
                                <TableView fx:id="pendingOrdersTable" prefHeight="300">
                                    <columns>
                                        <TableColumn text="Type" fx:id="pendingTypeCol" prefWidth="350" />
                                        <TableColumn text="Source" fx:id="pendingSourceCol" prefWidth="150" />
                                        <TableColumn text="Order Date" fx:id="pendingDateCol" prefWidth="200" />
                                        <TableColumn text="Total" fx:id="pendingTotalCol" prefWidth="150" />
                                    </columns>
                                </TableView>
                            </center>
                            <bottom>
                                <HBox spacing="10" style="-fx-padding: 10;">
                                    <Button text="Start Order" fx:id="startOrderBtn"
                                            style="-fx-font-size: 14px; -fx-padding: 8 16; -fx-background-color: #3498db; -fx-text-fill: white;"
                                            onAction="#handleStartOrder" />
                                    <Button text="Delete Order" fx:id="deletePendingBtn"
                                            style="-fx-font-size: 14px; -fx-padding: 8 16; -fx-background-color: #e74c3c; -fx-text-fill: white;"
                                            onAction="#handleDeletePendingOrder" />
                                </HBox>
                            </bottom>
                        </BorderPane>
                    </VBox>
                </Tab>

                <Tab text="In-Progress Orders">
                    <VBox spacing="10">
                        <Label text="Orders currently being processed"
                               style="-fx-text-fill: #3498db; -fx-font-weight: bold;" />
                        <BorderPane>
                            <center>
                                <TableView fx:id="inProgressOrdersTable" prefHeight="300">
                                    <columns>
                                        <TableColumn text="Type" fx:id="inProgressTypeCol" prefWidth="350" />
                                        <TableColumn text="Source" fx:id="inProgressSourceCol" prefWidth="150" />
                                        <TableColumn text="Order Date" fx:id="inProgressDateCol" prefWidth="200" />
                                        <TableColumn text="Total" fx:id="inProgressTotalCol" prefWidth="150" />
                                    </columns>
                                </TableView>
                            </center>
                            <bottom>
                                <HBox spacing="10" style="-fx-padding: 10;">
                                    <Button text="Complete Order" fx:id="completeOrderBtn"
                                            style="-fx-font-size: 14px; -fx-padding: 8 16; -fx-background-color: #27ae60; -fx-text-fill: white;"
                                            onAction="#handleCompleteOrder" />
                                    <Button text="Undo Start" fx:id="undoStartBtn"
                                            style="-fx-font-size: 14px; -fx-padding: 8 16; -fx-background-color: #f39c12; -fx-text-fill: white;"
                                            onAction="#handleUndoStart" />
                                    <Button text="Delete Order" fx:id="deleteInProgressBtn"
                                            style="-fx-font-size: 14px; -fx-padding: 8 16; -fx-background-color: #e74c3c; -fx-text-fill: white;"
                                            onAction="#handleDeleteInProgressOrder" />
                                </HBox>
                            </bottom>
                        </BorderPane>
                    </VBox>
                </Tab>

                <Tab text="Completed Orders">
                    <VBox spacing="10">
                        <Label text="Successfully completed orders"
                               style="-fx-text-fill: #27ae60; -fx-font-weight: bold;" />
                        <BorderPane>
                            <center>
                                <TableView fx:id="completedOrdersTable" prefHeight="300">
                                    <columns>
                                        <TableColumn text="Type" fx:id="completedTypeCol" prefWidth="350" />
                                        <TableColumn text="Source" fx:id="completedSourceCol" prefWidth="150" />
                                        <TableColumn text="Order Date" fx:id="completedDateCol" prefWidth="200" />
                                        <TableColumn text="Total" fx:id="completedTotalCol" prefWidth="150" />
                                    </columns>
                                </TableView>
                            </center>
                            <bottom>
                                <HBox spacing="10" style="-fx-padding: 10;">
                                    <Button text="Undo Complete" fx:id="undoCompleteBtn"
                                            style="-fx-font-size: 14px; -fx-padding: 8 16; -fx-background-color: #f39c12; -fx-text-fill: white;"
                                            onAction="#handleUndoComplete" />
                                    <Button text="Delete Order" fx:id="deleteCompletedBtn"
                                            style="-fx-font-size: 14px; -fx-padding: 8 16; -fx-background-color: #e74c3c; -fx-text-fill: white;"
                                            onAction="#handleDeleteCompletedOrder" />
                                </HBox>
                            </bottom>
                        </BorderPane>
                    </VBox>
                </Tab>
            </tabs>
        </TabPane>
    </center>

    <right>
        <VBox spacing="15" style="-fx-padding: 16; -fx-background-color: #ecf0f1; -fx-border-color: #bdc3c7;">
            <Label text="Order Details" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" />

            <VBox spacing="5">
                <Label fx:id="orderTypeLabel" text="Type: " style="-fx-font-weight: bold;" />
                <Label fx:id="orderSourceLabel" text="Source: " />
                <Label fx:id="orderDateLabel" text="Date: " />
                <Label fx:id="orderTotalLabel" text="Total: " style="-fx-font-weight: bold; -fx-text-fill: #27ae60;" />
            </VBox>

            <Separator />

            <Label text="Items:" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" />
            <TableView fx:id="itemsTable" prefHeight="250">
                <columns>
                    <TableColumn text="Name" fx:id="itemNameCol" prefWidth="120" />
                    <TableColumn text="Quantity" fx:id="itemQuantityCol" prefWidth="80" />
                    <TableColumn text="Price" fx:id="itemPriceCol" prefWidth="100" />
                </columns>
            </TableView>
        </VBox>
    </right>

    <padding>
        <Insets top="10" right="10" bottom="10" left="10" />
    </padding>
</BorderPane>